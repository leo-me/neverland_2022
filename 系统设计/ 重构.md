# 定义

1. 在不改变功能的情况下，改善代码结构
2. 提高代码的可读性、可扩展性
3. 重构不是代码优化，重构注重的是提高代码的可理解性与可扩展性，
4. 对性能的影响可好可坏。性能优化则让程序运行的更快，当然，最终的代码可能更难理解和维护。


驱动重构

介绍背景：

1. 落地页的背景
   ssr异构 smarty react -> 同构  体验 会闪一下
   业务迭代 -> 众多历史包袱
   更换技术栈 -> react  to  san

2. 云迹的背景
   需求迭代价大 -> django 模板语言，更新页面，后端更新模板


什么代码需要重构

1. 破窗效应

2. 重复的代码

3. 过长的组件

4. 过长的逻辑

5. 纯函数 -> 副作用和纯函数分离，不要改变入参






涉及的设计模式，做了什么事情


1. 策略模式 -> 替代过长的 switch 和 很多的if else

2. 单例模式




怎么保证重构不引入新的bug

1. 单元测试
2. 端到端测试、灰度测试
3. 逐渐放量



如何推动重构

1. 让业务方、产品、测试看到开发中的痛点和技术上的瓶颈
2. 让所有人意识到缝缝补补破窗效应导致问题加剧，已经积重难返了
3. 强调重构带来的技术收益和业务收益，强调重构带来的优点：BUG数量减少，维护成本下降，BUG排查变快，开发速度增高等（业务价值才是绩效的根本）
4. 提供切实可行并可控的重构计划方案




参考书目

《代码整洁之道》
《重构 - 改善既有代码的设计》









