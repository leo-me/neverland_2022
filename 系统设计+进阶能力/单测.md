# 什么是单元测试？

单元测试，是指对软件中的最小可测试单元进行检查和验证，也就是说一个测试单元往往是一个原子型函数，拥有单元测试的程序有以下几个好处：

1、它是一种验证行为

程序中的每一项功能都是测试来验证它的正确性。它为以后的开发提供支援。就算是开发后期，我们也可以轻松的增加功能或更改程序结构，而不用担心这个过程中会破坏重要的东西。而且它为代码的重构提供了保障。这样，我们就可以更自由的对程序进行改进。

2、它是一种设计行为

编写单元测试将使我们从调用者观察、思考。特别是先写测试（Test First），迫使我们把程序设计成易于调用和可测试的，即迫使我们解除软件中的耦合。

3、它是一种编写文档的行为

单元测试是一种无价的文档，它是展示函数或类如何使用的最佳文档。这份文档是可编译、可运行的，并且它保持最新，永远与代码同步。

4、它具有回归性

自动化的单元测试避免了代码出现回归，编写完成之后，可以随时随地的快速运行测试。


# 单元测试用例设计
任何一个单元测试都应该包含：

1. 正常输入
   - 离散覆盖参数值域

2. 边界输入
    - 空值验证
    - 零值验证
    - 最大值验证

3. 非法输入
   - 入参数据类型非法
   - 内存溢出验证


Jest


# React组件测试用例必须包含

1. API属性覆盖性测试用例
2. DOM快照比对，幂等校验
3. 私有Utils函数测试用例，千万不能忽略Utils函数的测试用例，很多时候，bug就出在这上面


# 快照对比
1. 字符串
2. 类型

```js
   it('renders correctly', () => {
     const tree = renderer
       .create(<Link page="https://example.com">Example Site</Link>)
       .toJSON();
     expect(tree).toMatchInlineSnapshot(`
   <a
     className="normal"
     href="https://example.com"
     onMouseEnter={[Function]}
     onMouseLeave={[Function]}
   >
     Example Site
   </a>
   `);
});

```


# 渲染行为测试

1. 模块应被渲染的DOM树是否正确
2. 模块的属性传递是否正确，（属性是方法则是否被正确调用，属性是布尔值或对象则是否被正确传递且达到预期的目的）
3. 模块内的各个行为是否正确
4. 甚至你还可以测试各个DOM节点是否被应用预期的class，且这些class是不是预期的样式
